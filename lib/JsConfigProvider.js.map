{"version":3,"file":"JsConfigProvider.js","names":["_sys","require","_JsonConfigProvider","_interopRequireDefault","obj","__esModule","default","JsConfigProvider","JsonConfigProvider","load_","logger","fs","pathExists","filePath","config","log","save_","outputFile","JSON","stringify","_default","exports","module"],"sources":["../src/JsConfigProvider.js"],"sourcesContent":["import { fs } from '@genx/sys';\n\nimport JsonConfigProvider from './JsonConfigProvider.js';\n\n/**\n * JavaScirpt module file config data source\n * @class JsConfigProvider\n * @extends JsonConfigProvider\n */\nclass JsConfigProvider extends JsonConfigProvider {\n    /**\n     * Start loading the config files\n     * @returns {Promise.<object>}\n     */\n    async load_(logger) {\n        if (await fs.pathExists(this.filePath)) {\n            this.config = require(this.filePath); // load js into sandbox\n            if (logger) {\n                logger.log(\n                    'info',\n                    `Configuration is loaded from \"${this.filePath}\"`\n                );\n            }\n        } else {\n            this.config = {};\n        }\n\n        return this.config;\n    }\n\n    /**\n     * Start saving the config to files\n     * @returns {Promise.<*>}\n     */\n    async save_() {\n        return fs.outputFile(\n            this.filePath,\n            'module.exports = ' + JSON.stringify(this.config, null, 4) + ';'\n        );\n    }\n}\n\nexport default JsConfigProvider;\n"],"mappings":"oIAAA,IAAAA,IAAA,CAAAC,OAAA,cAEA,IAAAC,mBAAA,CAAAC,sBAAA,CAAAF,OAAA,6BAAyD,SAAAE,uBAAAC,GAAA,SAAAA,GAAA,EAAAA,GAAA,CAAAC,UAAA,CAAAD,GAAA,EAAAE,OAAA,CAAAF,GAAA,EAOzD,KAAM,CAAAG,gBAAgB,QAAS,CAAAC,2BAAmB,CAK9C,KAAM,CAAAC,KAAKA,CAACC,MAAM,CAAE,CAChB,GAAI,KAAM,CAAAC,OAAE,CAACC,UAAU,CAAC,IAAI,CAACC,QAAQ,CAAC,CAAE,CACpC,IAAI,CAACC,MAAM,CAAGb,OAAO,CAAC,IAAI,CAACY,QAAQ,CAAC,CACpC,GAAIH,MAAM,CAAE,CACRA,MAAM,CAACK,GAAG,CACN,MAAM,CACL,iCAAgC,IAAI,CAACF,QAAS,GAAE,CAEzD,CACJ,CAAC,IAAM,CACH,IAAI,CAACC,MAAM,CAAG,CAAC,CACnB,CAEA,MAAO,KAAI,CAACA,MAChB,CAMA,KAAM,CAAAE,KAAKA,CAAA,CAAG,CACV,MAAO,CAAAL,OAAE,CAACM,UAAU,CAChB,IAAI,CAACJ,QAAQ,CACb,mBAAmB,CAAGK,IAAI,CAACC,SAAS,CAAC,IAAI,CAACL,MAAM,CAAE,IAAI,CAAE,CAAC,CAAC,CAAG,GAAG,CAExE,CACJ,CAAC,IAAAM,QAAA,CAEcb,gBAAgB,CAAAc,OAAA,CAAAf,OAAA,CAAAc,QAAA,CAAAE,MAAA,CAAAD,OAAA,CAAAA,OAAA,CAAAf,OAAA"}