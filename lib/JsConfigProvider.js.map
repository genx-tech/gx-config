{"version":3,"file":"JsConfigProvider.js","names":["fs","load_","require","JsonConfigProvider","JsConfigProvider","logger","pathExists","filePath","config","log","save_","outputFile","JSON","stringify","module","exports"],"sources":["../src/JsConfigProvider.js"],"sourcesContent":["'use strict';\n\nconst { fs, load_ } = require('@genx/sys');\n\nconst JsonConfigProvider = require('./JsonConfigProvider.js');\n\n/**\n * JavaScirpt module file config data source\n * @class JsConfigProvider\n * @extends JsonConfigProvider\n */\nclass JsConfigProvider extends JsonConfigProvider {\n    /**\n     * Start loading the config files\n     * @returns {Promise.<object>}\n     */\n    async load_(logger) {\n        if (await fs.pathExists(this.filePath)) {\n            this.config = await load_(this.filePath); // load js into sandbox\n            if (logger) {\n                logger.log(\n                    'info',\n                    `Configuration is loaded from \"${this.filePath}\"`\n                );\n            }\n        } else {\n            this.config = {};\n        }\n\n        return this.config;\n    }\n\n    /**\n     * Start saving the config to files\n     * @returns {Promise.<*>}\n     */\n    async save_() {\n        return fs.outputFile(\n            this.filePath,\n            'module.exports = ' + JSON.stringify(this.config, null, 4) + ';'\n        );\n    }\n}\n\nmodule.exports = JsConfigProvider;\n"],"mappings":"AAAA;;AAEA,MAAM;EAAEA,EAAF;EAAMC;AAAN,IAAgBC,OAAO,CAAC,WAAD,CAA7B;;AAEA,MAAMC,kBAAkB,GAAGD,OAAO,CAAC,yBAAD,CAAlC;AAEA;AACA;AACA;AACA;AACA;;;AACA,MAAME,gBAAN,SAA+BD,kBAA/B,CAAkD;EAC9C;AACJ;AACA;AACA;EACe,MAALF,KAAK,CAACI,MAAD,EAAS;IAChB,IAAI,MAAML,EAAE,CAACM,UAAH,CAAc,KAAKC,QAAnB,CAAV,EAAwC;MACpC,KAAKC,MAAL,GAAc,MAAMP,KAAK,CAAC,KAAKM,QAAN,CAAzB,CADoC,CACM;;MAC1C,IAAIF,MAAJ,EAAY;QACRA,MAAM,CAACI,GAAP,CACI,MADJ,EAEK,iCAAgC,KAAKF,QAAS,GAFnD;MAIH;IACJ,CARD,MAQO;MACH,KAAKC,MAAL,GAAc,EAAd;IACH;;IAED,OAAO,KAAKA,MAAZ;EACH;EAED;AACJ;AACA;AACA;;;EACe,MAALE,KAAK,GAAG;IACV,OAAOV,EAAE,CAACW,UAAH,CACH,KAAKJ,QADF,EAEH,sBAAsBK,IAAI,CAACC,SAAL,CAAe,KAAKL,MAApB,EAA4B,IAA5B,EAAkC,CAAlC,CAAtB,GAA6D,GAF1D,CAAP;EAIH;;AA9B6C;;AAiClDM,MAAM,CAACC,OAAP,GAAiBX,gBAAjB"}